import{a4 as c,I as C,g as $,a5 as q,n as H,O as l,y as s,q as R,a6 as Y,c as P,o as b,a7 as n,a8 as G,v as y,x as S,ac as J,ab as K}from"./index-CVVgb_0u.js";/* empty css                *//* empty css                *//* empty css                  *//* empty css               *//* empty css                     *//* empty css               *//* empty css               *//* empty css                 *//* empty css              *//* empty css                        */import{a as Q,u as W}from"./admin-CwxjM0Fp.js";import{E as X,a as Z}from"./index-CsxsiZ4j.js";import{E as h}from"./index-Dx8dXwis.js";import{E as ee,a as le,b as ae}from"./index-BdJl17T6.js";import{E as te}from"./index-DrE0t9ZJ.js";import{v as se}from"./directive-DN3s17fQ.js";import{E as g}from"./index-UYW-ElF2.js";import{a as oe,b as re,E as de}from"./index-DzYfilnm.js";import{E as ne,a as ie}from"./index-DiwPX_9p.js";import{E as ue}from"./index-DqxSJkbl.js";import"./_Uint8Array-CoH_bIvD.js";import"./_initCloneObject-FQE32oAL.js";import"./index-DN65N5yW.js";import"./_baseClone-Dphu8_al.js";const me={class:"list-page"},Le={__name:"users",setup(pe){const _=c([]),r=c({currentPage:1,pageSize:20,total:3}),v=C(!0),i=c({username:"",email:"",isActive:null}),z=$(()=>{const o=(r.currentPage-1)*r.pageSize,a=o+r.pageSize;return _.slice(o,a)}),V=async()=>{v.value=!0;const o=await Q({page:r.currentPage,pageSize:r.pageSize,username:i.username,email:i.email,isActive:i.isActive});v.value=!1,o.successful?(_.splice(0,_.length,...o.data),r.total=o.data.length):console.error("getUsers ",o.message)},x=o=>{r.pageSize=o},I=o=>{r.currentPage=o},p=C(!1),e=c({email:"",isActive:!1,isAdmin:!1,setPassword:!1,password:"",repeatPassword:"",fullName:"",phoneNumber:"",address:"",description:""}),k=o=>{e.userId=o.id,e.email=o.email,e.isActive=o.isActive,e.isAdmin=o.isAdmin,e.setPassword=!1,e.password="",e.repeatPassword="",e.fullName=o.fullName,e.phoneNumber=o.phoneNumber,e.address=o.address,e.description=o.description,p.value=!0,console.log("Edit dialog opened",e)},D=async()=>{if(e.setPassword){if(!e.password||!e.repeatPassword){g.error("Please enter password and repeat password");return}if(e.password!==e.repeatPassword){g.error("Passwords do not match");return}}const o=await W({userId:e.userId,email:e.email,isActive:e.isActive,isAdmin:e.isAdmin,fullName:e.fullName,phoneNumber:e.phoneNumber,address:e.address,description:e.description,newPassword:e.setPassword?e.password:void 0,confirmNewPassword:e.setPassword?e.repeatPassword:void 0});o.successful?(V(),g.success("User updated successfully"),p.value=!1):g.error(o.message)};return q(()=>{V()}),(o,a)=>{const w=Z,B=X,u=J,A=oe,F=re,f=K,N=h,m=le,U=de,T=ee,j=ae,d=ne,E=ue,M=ie,L=te,O=se;return b(),H("div",me,[l(B,{"separator-icon":R(G)},{default:s(()=>[l(w,{to:"/"},{default:s(()=>a[15]||(a[15]=[n("Home")])),_:1}),l(w,null,{default:s(()=>a[16]||(a[16]=[n("Admin")])),_:1}),l(w,null,{default:s(()=>a[17]||(a[17]=[n("Users")])),_:1})]),_:1},8,["separator-icon"]),l(N,{justify:"end",my:"4",style:{width:"100%"}},{default:s(()=>[l(u,{modelValue:i.username,"onUpdate:modelValue":a[0]||(a[0]=t=>i.username=t),placeholder:"Username",style:{width:"200px"}},null,8,["modelValue"]),l(u,{modelValue:i.email,"onUpdate:modelValue":a[1]||(a[1]=t=>i.email=t),placeholder:"Email",style:{width:"200px"}},null,8,["modelValue"]),l(F,{modelValue:i.isActive,"onUpdate:modelValue":a[2]||(a[2]=t=>i.isActive=t),placeholder:"Active Status",style:{width:"200px"}},{default:s(()=>[l(A,{label:"All",value:null}),l(A,{label:"Active",value:!0}),l(A,{label:"Inactive",value:!1})]),_:1},8,["modelValue"]),l(f,{type:"primary",onClick:V},{default:s(()=>a[18]||(a[18]=[n("Filter")])),_:1})]),_:1}),Y((b(),P(T,{data:z.value,border:"",stripe:!0,"default-sort":{prop:"createdAt",order:"descending"}},{default:s(()=>[l(m,{sortable:"",prop:"username",label:"Username"}),l(m,{prop:"fullName",label:"Full Name"}),l(m,{prop:"email",label:"Email"}),l(m,{prop:"phoneNumber",label:"Phone Number"}),l(m,{prop:"isAdmin",label:"Is Administrator"},{default:s(({row:t})=>[l(U,{type:t.isAdmin?"success":"danger"},{default:s(()=>[n(y(t.isAdmin?"Yes":"No"),1)]),_:2},1032,["type"])]),_:1}),l(m,{sortable:"",prop:"meterCount",label:"Meter Count"}),l(m,{sortable:"",prop:"createdAt",label:"Created At"},{default:s(({row:t})=>[n(y(new Date(t.createdAt).toLocaleString()),1)]),_:1}),l(m,{prop:"isActive",label:"Active"},{default:s(({row:t})=>[l(U,{type:t.isActive?"success":"danger"},{default:s(()=>[n(y(t.isActive?"Active":"Inactive"),1)]),_:2},1032,["type"])]),_:1}),l(m,{label:"Actions",width:"180"},{default:s(({row:t})=>[l(f,{type:"primary",size:"small",onClick:fe=>k(t)},{default:s(()=>a[19]||(a[19]=[n("Edit")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[O,v.value]]),l(N,{justify:"end",w:"full"},{default:s(()=>[l(j,{my:"4",onSizeChange:x,onCurrentChange:I,"current-page":r.currentPage,"page-sizes":[10,20,50,100],"page-size":r.pageSize,total:r.total,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])]),_:1}),l(L,{modelValue:p.value,"onUpdate:modelValue":a[14]||(a[14]=t=>p.value=t),title:"Edit User",width:"500px"},{footer:s(()=>[l(f,{onClick:a[13]||(a[13]=t=>p.value=!1)},{default:s(()=>a[20]||(a[20]=[n("Cancel")])),_:1}),l(f,{type:"primary",onClick:D},{default:s(()=>a[21]||(a[21]=[n("Save")])),_:1})]),default:s(()=>[l(M,{model:e,"label-width":"180px"},{default:s(()=>[l(d,{label:"Email"},{default:s(()=>[l(u,{modelValue:e.email,"onUpdate:modelValue":a[3]||(a[3]=t=>e.email=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"Full Name"},{default:s(()=>[l(u,{modelValue:e.fullName,"onUpdate:modelValue":a[4]||(a[4]=t=>e.fullName=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"Phone Number"},{default:s(()=>[l(u,{modelValue:e.phoneNumber,"onUpdate:modelValue":a[5]||(a[5]=t=>e.phoneNumber=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"Address"},{default:s(()=>[l(u,{modelValue:e.address,"onUpdate:modelValue":a[6]||(a[6]=t=>e.address=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"Description"},{default:s(()=>[l(u,{type:"textarea",rows:"3",modelValue:e.description,"onUpdate:modelValue":a[7]||(a[7]=t=>e.description=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"Active Status"},{default:s(()=>[l(E,{modelValue:e.isActive,"onUpdate:modelValue":a[8]||(a[8]=t=>e.isActive=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"Is Administrator"},{default:s(()=>[l(E,{modelValue:e.isAdmin,"onUpdate:modelValue":a[9]||(a[9]=t=>e.isAdmin=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"Set Password"},{default:s(()=>[l(E,{modelValue:e.setPassword,"onUpdate:modelValue":a[10]||(a[10]=t=>e.setPassword=t)},null,8,["modelValue"])]),_:1}),e.setPassword?(b(),P(d,{key:0,label:"Password"},{default:s(()=>[l(u,{type:"password",modelValue:e.password,"onUpdate:modelValue":a[11]||(a[11]=t=>e.password=t)},null,8,["modelValue"])]),_:1})):S("",!0),e.setPassword?(b(),P(d,{key:1,label:"Repeat Password"},{default:s(()=>[l(u,{type:"password",modelValue:e.repeatPassword,"onUpdate:modelValue":a[12]||(a[12]=t=>e.repeatPassword=t)},null,8,["modelValue"])]),_:1})):S("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{Le as default};
