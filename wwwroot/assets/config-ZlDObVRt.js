import{ae as P,u as x,I as v,a5 as M,n as p,q as g,O as t,y as a,x as b,r,a6 as k,J as D,a as N,af as w,o as _,a7 as m,a8 as A,M as L,ag as O,ac as R,ab as q}from"./index-CVVgb_0u.js";/* empty css                *//* empty css             *//* empty css                  *//* empty css               */import{E as H}from"./input-number-DDx7upKp.js";/* empty css               *//* empty css                        *//* empty css                                                                   *//* empty css                *//* empty css                     *//* empty css               *//* empty css                 *//* empty css              */import{E as i}from"./index-UYW-ElF2.js";import{E as J,a as Q}from"./index-CsxsiZ4j.js";import{E as T}from"./index-Dzl3yFnS.js";import{v as h}from"./directive-DN3s17fQ.js";import{E as j}from"./index-DqxSJkbl.js";import{E as z,a as G}from"./index-DiwPX_9p.js";import"./index-CItWWpyQ.js";import"./_Uint8Array-CoH_bIvD.js";import"./_baseClone-Dphu8_al.js";import"./_initCloneObject-FQE32oAL.js";const K={key:0},W={class:"config-container"},X={key:1,class:"loading-modal"},Y={class:"loading-content"},Z={style:{height:"200px"}},$={__name:"config",setup(ee){N();const B=x(),o=v({allowCors:!1,configed:!1,dB_Server:"",dB_Port:0,dB_Database:"",dB_User:"",dB_Password:""}),f=v(!1),V=async()=>{try{const l=await w();l.successful?o.value=l.data:i.error("Failed to fetch config:"+l.message)}catch(l){i.error("Failed to fetch config"),console.error("Failed to fetch config:",l)}},c=async()=>{try{const l=await O(o.value);if(l.successful){i.success("Settings saved successfully."),f.value=!0;const e=setInterval(async()=>{const d=await w();d.successful&&d.data.configed&&(clearInterval(e),location.reload())},5e3)}else{i.error("Failed to save settings:"+l.message);return}}catch(l){console.error("Failed to save settings:",l),i.error("Failed to save settings")}};return M(()=>{V()}),(l,e)=>{const d=Q,S=J,y=j,n=z,u=R,E=H,C=q,U=G,F=T,I=h;return _(),p(D,null,[g(B).isAdmin?(_(),p("div",K,[t(S,{"separator-icon":g(A)},{default:a(()=>[t(d,{to:"/"},{default:a(()=>e[6]||(e[6]=[m("Home")])),_:1}),t(d,null,{default:a(()=>e[7]||(e[7]=[m("Admin")])),_:1}),t(d,null,{default:a(()=>e[8]||(e[8]=[m("System Settings")])),_:1})]),_:1},8,["separator-icon"])])):b("",!0),r("div",W,[t(F,{class:"config-card",shadow:"hover"},{default:a(()=>[e[12]||(e[12]=r("h2",{class:"config-title"},"System Settings",-1)),t(U,{model:o.value,"label-width":"150px",onSubmit:L(c,["prevent"])},{default:a(()=>[e[10]||(e[10]=r("div",{class:"form-group-title"},"Basic Settings",-1)),t(n,{label:"Allow CORS"},{default:a(()=>[t(y,{modelValue:o.value.allowCors,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.allowCors=s)},null,8,["modelValue"])]),_:1}),e[11]||(e[11]=r("div",{class:"form-group-title"},"MySQL Settings",-1)),t(n,{label:"Server"},{default:a(()=>[t(u,{modelValue:o.value.dB_Server,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.dB_Server=s)},null,8,["modelValue"])]),_:1}),t(n,{label:"Port"},{default:a(()=>[t(E,{modelValue:o.value.dB_Port,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.dB_Port=s)},null,8,["modelValue"])]),_:1}),t(n,{label:"Database"},{default:a(()=>[t(u,{modelValue:o.value.dB_Database,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.dB_Database=s)},null,8,["modelValue"])]),_:1}),t(n,{label:"User"},{default:a(()=>[t(u,{modelValue:o.value.dB_User,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.dB_User=s)},null,8,["modelValue"])]),_:1}),t(n,{label:"Password"},{default:a(()=>[t(u,{modelValue:o.value.dB_Password,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.dB_Password=s),"show-password":""},null,8,["modelValue"])]),_:1}),t(n,null,{default:a(()=>[t(C,{type:"primary",onClick:c},{default:a(()=>e[9]||(e[9]=[m("Save Settings")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),f.value?(_(),p("div",X,[r("div",Y,[k(r("div",Z,null,512),[[I,f.value]]),e[13]||(e[13]=r("p",null," Config updated successfully. Please wait for the server to restart. ",-1)),e[14]||(e[14]=r("p",null," If the server does not restart automatically, please restart it manually. ",-1))])])):b("",!0)],64)}}},Ce=P($,[["__scopeId","data-v-28a1bf12"]]);export{Ce as default};
