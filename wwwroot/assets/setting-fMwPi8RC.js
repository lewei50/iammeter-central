import{a4 as U,I as y,a5 as g,n as I,O as r,y as o,q as w,cD as h,o as k,a7 as u,a8 as x,cE as B,ac as F,ab as R}from"./index-CVVgb_0u.js";/* empty css             *//* empty css                  *//* empty css               *//* empty css                        */import{E as d}from"./index-UYW-ElF2.js";import{E as v,a as C}from"./index-CsxsiZ4j.js";import{E as S}from"./index-Dzl3yFnS.js";import{E as q,a as D}from"./index-DiwPX_9p.js";import"./_Uint8Array-CoH_bIvD.js";import"./_baseClone-Dphu8_al.js";import"./_initCloneObject-FQE32oAL.js";const W={__name:"setting",setup(M){const l=U({id:0,username:"",email:"",fullName:"",phoneNumber:"",address:"",description:""}),c={fullName:[{required:!0,message:"Enter full name",trigger:"blur"}]},i=y(null),p=async()=>{try{const s=await h();if(!s.successful){d.error("Failed to fetch user info");return}const e=s.data;l.id=e.id,l.username=e.username,l.email=e.email,l.fullName=e.fullName,l.phoneNumber=e.phoneNumber,l.address=e.address,l.description=e.description}catch{d.error("Failed to fetch user info")}};g(()=>{p()});const b=async()=>{i.value.validate(async s=>{if(s)try{const e=await B({userId:l.id,email:l.email,password:l.password,fullName:l.fullName,phoneNumber:l.phoneNumber,address:l.address,description:l.description});e.successful?d.success("Update successful"):d.error(e.message||"Update failed")}catch{d.error("Update failed")}else d.error("Please check if the form is filled out correctly")})},_=()=>{p()};return(s,e)=>{const m=C,E=v,n=F,t=q,f=R,N=D,V=S;return k(),I("div",null,[r(E,{"separator-icon":w(x)},{default:o(()=>[r(m,{to:"/user/dashboard"},{default:o(()=>e[6]||(e[6]=[u("Home")])),_:1}),r(m,null,{default:o(()=>e[7]||(e[7]=[u("Settings")])),_:1}),r(m,null,{default:o(()=>e[8]||(e[8]=[u("User Settings")])),_:1})]),_:1},8,["separator-icon"]),r(V,{my:"5"},{default:o(()=>[r(N,{model:l,rules:c,ref_key:"formRef",ref:i,"label-width":"200px"},{default:o(()=>[r(t,{label:"Username",prop:"username"},{default:o(()=>[r(n,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=a=>l.username=a),placeholder:"Username",disabled:""},null,8,["modelValue"])]),_:1}),r(t,{label:"Email",prop:"email"},{default:o(()=>[r(n,{modelValue:l.email,"onUpdate:modelValue":e[1]||(e[1]=a=>l.email=a),placeholder:"Email",disabled:""},null,8,["modelValue"])]),_:1}),r(t,{label:"Full Name",prop:"fullName"},{default:o(()=>[r(n,{modelValue:l.fullName,"onUpdate:modelValue":e[2]||(e[2]=a=>l.fullName=a),placeholder:"Enter full name"},null,8,["modelValue"])]),_:1}),r(t,{label:"Phone Number",prop:"phoneNumber"},{default:o(()=>[r(n,{modelValue:l.phoneNumber,"onUpdate:modelValue":e[3]||(e[3]=a=>l.phoneNumber=a),placeholder:"Enter phone number"},null,8,["modelValue"])]),_:1}),r(t,{label:"Address",prop:"address"},{default:o(()=>[r(n,{modelValue:l.address,"onUpdate:modelValue":e[4]||(e[4]=a=>l.address=a),placeholder:"Enter address"},null,8,["modelValue"])]),_:1}),r(t,{label:"Description",prop:"description"},{default:o(()=>[r(n,{type:"textarea",modelValue:l.description,"onUpdate:modelValue":e[5]||(e[5]=a=>l.description=a),placeholder:"Enter description"},null,8,["modelValue"])]),_:1}),r(t,null,{default:o(()=>[r(f,{type:"primary",onClick:b},{default:o(()=>e[9]||(e[9]=[u("Submit")])),_:1}),r(f,{onClick:_},{default:o(()=>e[10]||(e[10]=[u("Reset")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}};export{W as default};
